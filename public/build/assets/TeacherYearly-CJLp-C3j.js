import{j as e,L as q}from"./app-BzdOADVP.js";import{A as E,G as M,m as O,B as U,T as V}from"./app-layout-DJJLhKv_.js";import{C as m,a as N,b as h,c as j,d as R}from"./card-Cs6Ji-ep.js";import{B as u}from"./badge-D3QJI1i6.js";import{B as D}from"./app-logo-icon-BkO5Ozxv.js";import{T as I,a as K,b as P,c as x,d as Q,e as r}from"./table-0haSWtSt.js";import{U as w}from"./user-Bp1zN1-1.js";import{E as X}from"./eye-fIjAslyx.js";import{D as z}from"./download-CFjlwEKO.js";import{B as J}from"./building-2-elMs-EHZ.js";import{C as W}from"./calculator-BGAZN5Ev.js";import{C as Z}from"./calendar-BR3WW--q.js";import"./index-CK31Y0Kf.js";import"./index-C1afcH4J.js";function je({teacher:n,academicYear:d,salaryData:g,summary:l}){var T,C,_,A;const $=[{title:"Tổng quan",href:"/dashboard"},{title:"Báo cáo tiền dạy",href:"/reports"},{title:"Báo cáo cá nhân",href:"#"}],t=i=>{if(i==null)return 0;const c=Number(i);return isNaN(c)?0:c},a=(i,c=1)=>t(i).toFixed(c),f=i=>{const c=t(i);return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(c)},p={totalSalary:t(l==null?void 0:l.totalSalary),totalClasses:t(l==null?void 0:l.totalClasses),totalLessons:t(l==null?void 0:l.totalLessons),averageSalaryPerClass:t(l==null?void 0:l.averageSalaryPerClass)};return e.jsxs(E,{breadcrumbs:$,children:[e.jsx(q,{title:`Báo cáo cá nhân - ${(n==null?void 0:n.fullName)||"N/A"}`}),e.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(w,{className:"h-6 w-6 text-blue-600"})}),"Báo cáo cá nhân giảng viên"]}),e.jsxs("p",{className:"text-muted-foreground text-lg",children:[(n==null?void 0:n.fullName)||"N/A"," - Năm học ",(d==null?void 0:d.name)||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{variant:"outline",onClick:()=>{const i=`/reports/export-pdf?type=teacher&teacher_id=${n==null?void 0:n.id}&academic_year_id=${d==null?void 0:d.id}`;window.open(i,"_blank")},children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Xem trước PDF"]}),e.jsxs(D,{onClick:()=>{const i=`/reports/export-pdf?type=teacher&teacher_id=${n==null?void 0:n.id}&academic_year_id=${d==null?void 0:d.id}`;window.location.href=i},className:"bg-red-600 hover:bg-red-700",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Tải PDF"]})]})]})}),e.jsxs(m,{children:[e.jsx(N,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Thông tin giảng viên"]})}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Họ tên"}),e.jsx("div",{className:"text-lg font-semibold",children:(n==null?void 0:n.fullName)||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Khoa"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:((T=n==null?void 0:n.department)==null?void 0:T.name)||"N/A"}),e.jsx(u,{variant:"outline",children:((C=n==null?void 0:n.department)==null?void 0:C.abbrName)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Bằng cấp"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:((_=n==null?void 0:n.degree)==null?void 0:_.name)||"N/A"}),e.jsxs(u,{variant:"secondary",children:["HS: ",t((A=n==null?void 0:n.degree)==null?void 0:A.baseSalaryFactor)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Liên hệ"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("div",{children:(n==null?void 0:n.email)||"N/A"}),e.jsx("div",{children:(n==null?void 0:n.phone)||"N/A"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tổng lương"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f(p.totalSalary)})})]}),e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tổng lớp học"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold",children:p.totalClasses})})]}),e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tổng tiết quy đổi"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold",children:a(p.totalLessons)})})]}),e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"TB lương/lớp"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold",children:f(p.averageSalaryPerClass)})})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(g||{}).map(([i,c])=>{const v=(c||[]).reduce((s,o)=>s+t(o==null?void 0:o.total_salary),0),b=(c||[]).length,G=(c||[]).reduce((s,o)=>s+t(o==null?void 0:o.converted_lessons),0);return e.jsxs(m,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(h,{className:"text-xl flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),i||"N/A"]}),e.jsxs(R,{children:[b," lớp học • ",a(G)," tiết quy đổi"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f(v)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["TB: ",b>0?f(v/b):f(0)]})]})]})}),e.jsx(j,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(I,{children:[e.jsx(K,{children:e.jsxs(P,{children:[e.jsx(x,{children:"Lớp học"}),e.jsx(x,{children:"Môn học"}),e.jsx(x,{className:"text-center",children:"Tiết TT"}),e.jsx(x,{className:"text-center",children:"HS Lớp"}),e.jsx(x,{className:"text-center",children:"HS Môn"}),e.jsx(x,{className:"text-center",children:"HS GV"}),e.jsx(x,{className:"text-center",children:"Tiết QĐ"}),e.jsx(x,{className:"text-right",children:"Lương"})]})}),e.jsx(Q,{children:(c||[]).map(s=>{var o,B,L,S,H,k,F;return e.jsxs(P,{children:[e.jsx(r,{className:"font-medium",children:((o=s==null?void 0:s.classroom)==null?void 0:o.name)||"N/A"}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((L=(B=s==null?void 0:s.classroom)==null?void 0:B.course)==null?void 0:L.name)||"N/A"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[((H=(S=s==null?void 0:s.classroom)==null?void 0:S.course)==null?void 0:H.code)||"N/A"," • ",t((F=(k=s==null?void 0:s.classroom)==null?void 0:k.course)==null?void 0:F.credits)," TC"]})]})}),e.jsx(r,{className:"text-center",children:t(s==null?void 0:s.actual_lessons)}),e.jsx(r,{className:"text-center",children:e.jsxs(u,{variant:t(s==null?void 0:s.class_coefficient)>=0?"default":"destructive",children:[t(s==null?void 0:s.class_coefficient)>=0?"+":"",t(s==null?void 0:s.class_coefficient)]})}),e.jsx(r,{className:"text-center",children:e.jsxs(u,{variant:"outline",children:["+",t(s==null?void 0:s.course_coefficient)]})}),e.jsx(r,{className:"text-center",children:e.jsxs(u,{variant:"secondary",children:["+",t(s==null?void 0:s.teacher_coefficient)]})}),e.jsx(r,{className:"text-center font-medium",children:a(s==null?void 0:s.converted_lessons)}),e.jsx(r,{className:"text-right font-bold text-green-600",children:f(s==null?void 0:s.total_salary)})]},(s==null?void 0:s.id)||Math.random())})})]})})})]},i)})}),(!g||Object.keys(g).length===0)&&e.jsx(m,{children:e.jsxs(j,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Chưa có dữ liệu lương"}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["Giảng viên này chưa có lớp học nào được tính lương trong năm học ",(d==null?void 0:d.name)||"N/A","."]})]})})]})]})}export{je as default};
