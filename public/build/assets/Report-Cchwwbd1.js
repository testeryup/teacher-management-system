import{j as e,L as F}from"./app-BzdOADVP.js";import{A as L,F as _,B as k,m as A}from"./app-layout-DJJLhKv_.js";import{C as d,a as m,b as h,c as o,d as H}from"./card-Cs6Ji-ep.js";import{B as O}from"./badge-D3QJI1i6.js";import{T as E,a as V,b as C,c as n,d as M,e as c}from"./table-0haSWtSt.js";import{B}from"./app-logo-icon-BkO5Ozxv.js";import{E as P}from"./eye-fIjAslyx.js";import{D as U}from"./download-CFjlwEKO.js";import{U as $}from"./users-Mxzx9_FF.js";import{C as q}from"./calculator-BGAZN5Ev.js";import"./index-CK31Y0Kf.js";import"./index-C1afcH4J.js";const G=[{title:"Tính lương giáo viên",href:"/salary"},{title:"Báo cáo lương",href:"#"}],x=(t,a=2)=>{const i=parseFloat(t);return isNaN(i)?"0.00":i.toFixed(a)},j=t=>{const a=parseFloat(t);return isNaN(a)?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a)},N=t=>{const a=parseFloat(t);return isNaN(a)?0:a};function se({salaryConfig:t,salaryReport:a}){var u,f,g,p;const i=Object.values(a).reduce((r,l)=>({totalTeachers:r.totalTeachers+1,totalClasses:r.totalClasses+l.total_classes,totalLessons:r.totalLessons+N(l.total_lessons),totalSalary:r.totalSalary+N(l.total_salary)}),{totalTeachers:0,totalClasses:0,totalLessons:0,totalSalary:0}),S=r=>{const s={draft:{label:"Bản nháp",className:"bg-gray-100 text-gray-800"},active:{label:"Đã tính",className:"bg-green-100 text-green-800"},closed:{label:"Đã đóng",className:"bg-red-100 text-red-800"}}[r];return e.jsx(O,{className:s.className,children:s.label})};return e.jsxs(L,{breadcrumbs:G,children:[e.jsx(F,{title:`Báo cáo lương - ${((u=t.semester)==null?void 0:u.name)||"NA"}`}),e.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(_,{className:"h-6 w-6 text-green-600"})}),"Báo cáo lương giảng viên"]}),e.jsxs("p",{className:"text-muted-foreground text-lg",children:[((f=t.semester)==null?void 0:f.name)||"NA"," - ",((p=(g=t.semester)==null?void 0:g.academicYear)==null?void 0:p.name)||"NA"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"text-right",children:[S(t.status),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Tiền/tiết: ",j(t.base_salary_per_lesson)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(B,{variant:"outline",onClick:()=>window.open(route("salary.preview-pdf",t.id),"_blank"),children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Xem trước PDF"]}),e.jsxs(B,{onClick:()=>window.location.href=route("salary.export-pdf",t.id),className:"bg-red-600 hover:bg-red-700",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Tải PDF"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tổng giảng viên"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:i.totalTeachers})})]}),e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tổng lớp học"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:i.totalClasses})})]}),e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tổng tiết quy đổi"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:x(i.totalLessons,1)})})]}),e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tổng lương"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j(i.totalSalary)})})]})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(a).map(([r,l])=>e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-xl",children:l.teacher.fullName}),e.jsxs(H,{children:[l.teacher.department.name," (",l.teacher.department.abbrName,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j(l.total_salary)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.total_classes," lớp • ",x(l.total_lessons,1)," tiết"]})]})]})}),e.jsx(o,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(C,{children:[e.jsx(n,{children:"Lớp học"}),e.jsx(n,{children:"Môn học"}),e.jsx(n,{className:"text-center",children:"Tiết TT"}),e.jsx(n,{className:"text-center",children:"HS Lớp"}),e.jsx(n,{className:"text-center",children:"HS Môn"}),e.jsx(n,{className:"text-center",children:"HS GV"}),e.jsx(n,{className:"text-center",children:"Tiết QĐ"}),e.jsx(n,{className:"text-right",children:"Lương"})]})}),e.jsx(M,{children:l.classes.map(s=>{var b,v,y,w,T;return e.jsxs(C,{children:[e.jsx(c,{className:"font-medium",children:((b=s.classroom)==null?void 0:b.name)||"N/A"}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((y=(v=s.classroom)==null?void 0:v.course)==null?void 0:y.name)||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:((T=(w=s.classroom)==null?void 0:w.course)==null?void 0:T.code)||""})]})}),e.jsx(c,{className:"text-center",children:s.actual_lessons||0}),e.jsx(c,{className:"text-center",children:e.jsx("span",{className:`font-medium ${N(s.class_coefficient)>=0?"text-green-600":"text-red-600"}`,children:x(s.class_coefficient,1)})}),e.jsx(c,{className:"text-center",children:x(s.course_coefficient,1)}),e.jsx(c,{className:"text-center",children:x(s.teacher_coefficient,1)}),e.jsx(c,{className:"text-center font-medium",children:x(s.converted_lessons,2)}),e.jsx(c,{className:"text-right font-mono font-medium",children:j(s.total_salary)})]},s.id)})})]})})})]},r))}),Object.keys(a).length===0&&e.jsx(d,{children:e.jsxs(o,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(_,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Chưa có dữ liệu lương"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Chưa có lớp học nào được tính lương trong học kỳ này."})]})})]})]})}export{se as default};
