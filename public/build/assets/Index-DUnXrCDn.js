import{K as O,m as L,r as l,j as e,L as B}from"./app-BzdOADVP.js";import{A as P,S as E,a as X,b as q,c as M,d as Q,e as R,f as K,g as z}from"./app-layout-DJJLhKv_.js";import{B as o}from"./app-logo-icon-BkO5Ozxv.js";import{T as G}from"./sonner-C79GmkCj.js";import{t}from"./index-DxeJ8Bvu.js";import{I as p}from"./input-DFu5t9Bc.js";import{L as m}from"./label-Dppx2W-H.js";import{P as J}from"./pagination-BB0cugiz.js";import{T as b,a as f,b as x,c as r,d as U,e as i}from"./table-0haSWtSt.js";import{A as V,a as W,b as Y,c as Z,d as _,e as $,f as ee,g as se}from"./alert-dialog-D5ivzF93.js";import{T as re}from"./textarea-uCfvnJdO.js";import"./index-CK31Y0Kf.js";import"./index-C1afcH4J.js";const ae=[{title:"Quản lý khoa",href:"/departments"}];function be({departments:n}){var g;(g=O().props)==null||g.flash;const{data:a,setData:c,post:v,processing:h,reset:N,delete:T}=L({name:"",abbrName:"",description:""}),[k,j]=l.useState(!1),[u,D]=l.useState(null),[S,C]=l.useState(null),[A,d]=l.useState(!1),y=()=>a.name.trim()?a.abbrName.trim()?a.name.length>255?(t.error("Tên khoa không được vượt quá 255 ký tự"),!1):a.abbrName.length>10?(t.error("Tên viết tắt không được vượt quá 10 ký tự"),!1):!0:(t.error("Tên viết tắt là bắt buộc"),!1):(t.error("Tên khoa là bắt buộc"),!1),H=(s,F)=>{D(s),C(F),d(!0)},I=()=>{u!==null&&(T(route("departments.destroy",u)),d(!1))},w=s=>{s.preventDefault(),y()&&v(route("departments.store"),{onSuccess:()=>{t.success("Thêm khoa mới thành công"),N(),j(!1)},onError:()=>{t.error("Thêm khoa mới thất bại")}})};return e.jsxs(P,{breadcrumbs:ae,children:[e.jsx(G,{}),e.jsx(B,{title:"Quản lý khoa"}),e.jsx("div",{className:"m-4",children:e.jsxs(E,{open:k,onOpenChange:j,children:[e.jsx(X,{asChild:!0,children:e.jsx(o,{variant:"default",className:"hover:cursor-pointer",children:"Thêm khoa mới"})}),e.jsxs(q,{children:[e.jsxs(M,{children:[e.jsx(Q,{children:"Thêm khoa mới"}),e.jsx(R,{children:"Nhập thông tin ở đây, sau đó nhấn lưu"})]}),e.jsx("form",{onSubmit:w,id:"department-form",className:"p-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-rows-2 items-center ",children:[e.jsx(m,{htmlFor:"name",children:"Tên khoa"}),e.jsx(p,{id:"name",value:a.name,onChange:s=>c("name",s.target.value)})]}),e.jsxs("div",{className:"grid grid-rows-2 items-center",children:[e.jsx(m,{htmlFor:"abbrName",children:"Tên viết tắt"}),e.jsx(p,{id:"abbrName",value:a.abbrName,onChange:s=>c("abbrName",s.target.value)})]}),e.jsxs("div",{className:"grid grid-rows-2 items-center",children:[e.jsx(m,{htmlFor:"description",children:"Mô tả"}),e.jsx(re,{id:"description",value:a.description,onChange:s=>c("description",s.target.value)})]})]})}),e.jsxs(K,{children:[e.jsx(z,{asChild:!0,children:e.jsx(o,{variant:"outline",type:"button",className:"hover:cursor-pointer",children:"Thoát"})}),e.jsx(o,{type:"submit",form:"department-form",disabled:h,className:"hover:cursor-pointer",children:h?"Đang thêm...":"Thêm mới"})]})]})]})}),n.data.length>0?e.jsx("div",{className:"m-4",children:e.jsxs(b,{children:[e.jsx(f,{children:e.jsxs(x,{children:[e.jsx(r,{className:"w-[100px]",children:"Id"}),e.jsx(r,{children:"Tên khoa"}),e.jsx(r,{children:"Tên viết tắt"}),e.jsx(r,{children:"Mô tả"}),e.jsx(r,{className:"text-center",children:"Hành động"})]})}),e.jsx(U,{children:n.data.map(s=>e.jsxs(x,{children:[e.jsx(i,{className:"font-medium",children:s.id}),e.jsx(i,{children:s.name}),e.jsx(i,{children:s.abbrName}),e.jsx(i,{children:s.description}),e.jsx(i,{className:"text-center space-x-2",children:e.jsx(o,{disabled:h,onClick:()=>H(s.id,s.name),className:"bg-red-500 hover:bg-red-700 hover:cursor-pointer",children:"Xoá"})})]},s.id))})]})}):e.jsx("div",{className:"m-4",children:e.jsx(b,{children:e.jsx(f,{children:e.jsxs(x,{children:[e.jsx(r,{className:"w-[100px]",children:"Id"}),e.jsx(r,{children:"Tên khoa"}),e.jsx(r,{children:"Tên viết tắt"}),e.jsx(r,{className:"text-center",children:"Hành động"})]})})})}),e.jsx("div",{className:"mx-4",children:e.jsx(J,{links:n.links,from:n.from,to:n.to,total:n.total})}),e.jsx(V,{open:A,onOpenChange:d,children:e.jsxs(W,{children:[e.jsxs(Y,{children:[e.jsx(Z,{children:"Xác nhận xoá"}),e.jsxs(_,{children:["Bạn có chắc chắn muốn xoá khoa ",e.jsx("strong",{children:S})," không? Hành động này không thể hoàn tác."]})]}),e.jsxs($,{children:[e.jsx(ee,{className:"hover:cursor-pointer",children:"Huỷ"}),e.jsx(se,{className:"hover:cursor-pointer",onClick:I,children:"Xác nhận"})]})]})})]})}export{be as default};
