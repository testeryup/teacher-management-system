import{j as e,L as v}from"./app-BzdOADVP.js";import{A as w,m as T,B as C,T as B}from"./app-layout-DJJLhKv_.js";import{C as a,a as t,b as r,c as l,d as j}from"./card-Cs6Ji-ep.js";import{B as S}from"./badge-D3QJI1i6.js";import{B as g}from"./app-logo-icon-BkO5Ozxv.js";import{P as k}from"./progress-DK_E0t60.js";import{T as A,a as F,b as f,c as n,d as L,e as c}from"./table-0haSWtSt.js";import{B as p}from"./building-2-elMs-EHZ.js";import{E as _}from"./eye-fIjAslyx.js";import{D}from"./download-CFjlwEKO.js";import{U as $}from"./users-Mxzx9_FF.js";import{C as P}from"./calculator-BGAZN5Ev.js";import{R,B as K,C as X,X as E,Y as G,T as H,a as U}from"./BarChart-iYCdpAxk.js";import{A as V}from"./award-BW1onu3v.js";import"./index-CK31Y0Kf.js";import"./index-C1afcH4J.js";function ne({department:i,academicYear:h,teachersData:d,departmentTotals:m}){const u=[{title:"Tổng quan",href:"/dashboard"},{title:"Báo cáo tiền dạy",href:"/reports"},{title:"Báo cáo theo khoa",href:"#"}],o=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s),N=d.slice(0,10).map(s=>({name:s.teacher.fullName.split(" ").slice(-2).join(" "),salary:s.totalSalary,classes:s.totalClasses})),y=d.slice(0,5),b=d.length>0?Math.max(...d.map(s=>s.totalSalary)):0;return e.jsxs(w,{breadcrumbs:u,children:[e.jsx(v,{title:`Báo cáo khoa - ${i.name}`}),e.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(p,{className:"h-6 w-6 text-green-600"})}),"Báo cáo theo khoa"]}),e.jsxs("p",{className:"text-muted-foreground text-lg",children:["Khoa ",i.name," (",i.abbrName,") - Năm học ",h.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",onClick:()=>{const s=`/reports/export-pdf?type=department&department_id=${i.id}&academic_year_id=${h.id}`;window.open(s,"_blank")},children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Xem trước PDF"]}),e.jsxs(g,{onClick:()=>{const s=`/reports/export-pdf?type=department&department_id=${i.id}&academic_year_id=${h.id}`;window.location.href=s},className:"bg-red-600 hover:bg-red-700",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Tải PDF"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Tổng giảng viên"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.totalTeachers})})]}),e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Tổng lương"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o(m.totalSalary)})})]}),e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Tổng lớp học"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.totalClasses})})]}),e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Tổng tiết QĐ"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.totalLessons.toFixed(1)})})]}),e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"TB lương/GV"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:o(m.averageSalaryPerTeacher)})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(a,{className:"md:col-span-2",children:[e.jsxs(t,{children:[e.jsx(r,{children:"Top 10 giảng viên theo lương"}),e.jsx(j,{children:"So sánh lương của các giảng viên trong khoa"})]}),e.jsx(l,{children:e.jsx(R,{width:"100%",height:300,children:e.jsxs(K,{data:N,children:[e.jsx(X,{strokeDasharray:"3 3"}),e.jsx(E,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(G,{tickFormatter:s=>(s/1e6).toFixed(1)+"M"}),e.jsx(H,{formatter:s=>[o(s),"Lương"]}),e.jsx(U,{dataKey:"salary",fill:"#10B981",radius:[4,4,0,0]})]})})})]}),e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Top 5 giảng viên"]}),e.jsx(j,{children:"Xếp hạng theo tổng lương"})]}),e.jsx(l,{className:"space-y-4",children:y.map((s,x)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${x===0?"bg-yellow-100 text-yellow-800":x===1?"bg-gray-100 text-gray-800":x===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:x+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:s.teacher.fullName}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.teacher.degree.name," • ",s.totalClasses," lớp"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-green-600 text-sm",children:o(s.totalSalary)})})]}),e.jsx(k,{value:s.totalSalary/b*100,className:"h-2"})]},s.teacher.id))})]})]}),e.jsxs(a,{children:[e.jsxs(t,{children:[e.jsx(r,{children:"Chi tiết lương giảng viên"}),e.jsx(j,{children:"Danh sách tất cả giảng viên có dữ liệu lương trong năm học"})]}),e.jsx(l,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(A,{children:[e.jsx(F,{children:e.jsxs(f,{children:[e.jsx(n,{children:"STT"}),e.jsx(n,{children:"Giảng viên"}),e.jsx(n,{children:"Bằng cấp"}),e.jsx(n,{className:"text-center",children:"Lớp học"}),e.jsx(n,{className:"text-center",children:"Tiết QĐ"}),e.jsx(n,{className:"text-right",children:"Tổng lương"}),e.jsx(n,{className:"text-right",children:"TB/lớp"})]})}),e.jsx(L,{children:d.map((s,x)=>e.jsxs(f,{children:[e.jsx(c,{className:"font-medium",children:x+1}),e.jsx(c,{children:e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:s.teacher.fullName})})}),e.jsx(c,{children:e.jsx(S,{variant:"outline",children:s.teacher.degree.name})}),e.jsx(c,{className:"text-center",children:s.totalClasses}),e.jsx(c,{className:"text-center",children:s.totalLessons.toFixed(1)}),e.jsx(c,{className:"text-right font-bold text-green-600",children:o(s.totalSalary)}),e.jsx(c,{className:"text-right",children:o(s.totalSalary/s.totalClasses)})]},s.teacher.id))})]})})})]}),d.length===0&&e.jsx(a,{children:e.jsxs(l,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(p,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Chưa có dữ liệu lương"}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["Khoa ",i.name," chưa có giảng viên nào được tính lương trong năm học ",h.name,"."]})]})})]})]})}export{ne as default};
