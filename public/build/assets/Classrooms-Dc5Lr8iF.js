import{j as e,K as Xe,r as h,m as le,L as Ge,S as re}from"./app-BzdOADVP.js";import{E as Ye,D as Re}from"./data-table-DLuYfbTv.js";import{D as Qe,h as We,i as Je,j as Ze,k as P,l as es,A as ss,S as ne,a as ce,b as ie,c as de,d as oe,e as he,f as me,g as xe,G as as,X as I}from"./app-layout-DJJLhKv_.js";import{c as L,B as c}from"./app-logo-icon-BkO5Ozxv.js";import{I as N}from"./input-DFu5t9Bc.js";import{L as d}from"./label-Dppx2W-H.js";import{P as ts}from"./pagination-BB0cugiz.js";import{T as ls,t as i}from"./index-DxeJ8Bvu.js";import{A as rs,a as ns,b as cs,c as is,d as ds,e as os,f as hs,g as ms}from"./alert-dialog-D5ivzF93.js";import{S as ue,a as pe,b as ge,c as je,d as F}from"./select-OCxlDRz8.js";import{C as fe,a as ve,b as Ne,c as _e}from"./card-Cs6Ji-ep.js";import{B as E}from"./badge-D3QJI1i6.js";import{S as be}from"./separator-D2YMcXrV.js";import{P as xs,R as us}from"./refresh-cw-C2KkqmM1.js";import{F as ps}from"./filter-C1TH0Smz.js";import{C as gs}from"./calendar-BR3WW--q.js";import"./table-0haSWtSt.js";import"./chevron-down-CEWiBjPz.js";import"./index-CK31Y0Kf.js";import"./index-C1afcH4J.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],$=L("ArrowUpDown",js);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],vs=L("Copy",fs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ye=L("Search",Ns),_s=({onEdit:r,onDelete:k})=>[{accessorKey:"id",header:"ID",cell:({row:l})=>e.jsx("div",{className:"text-center",children:l.getValue("id")})},{accessorKey:"code",header:({column:l})=>e.jsxs(c,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),children:["Mã lớp",e.jsx($,{className:"ml-2 h-4 w-4"})]}),cell:({row:l})=>e.jsx("div",{className:"text-left px-3 font-medium",children:l.getValue("code")})},{accessorKey:"name",header:({column:l})=>e.jsxs(c,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),children:["Tên lớp",e.jsx($,{className:"ml-2 h-4 w-4"})]}),cell:({row:l})=>e.jsx("div",{className:"text-left px-3",children:l.getValue("name")})},{accessorKey:"course",header:"Khóa học",cell:({row:l})=>{const t=l.getValue("course");return e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:(t==null?void 0:t.name)||""}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t==null?void 0:t.code,(t==null?void 0:t.department)&&` - ${t.department.abbrName}`]})]})}},{accessorKey:"semester",header:"Học kỳ",cell:({row:l})=>{var _;const t=l.getValue("semester");return e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:(t==null?void 0:t.name)||""}),e.jsx("div",{className:"text-sm text-muted-foreground",children:((_=t==null?void 0:t.academicYear)==null?void 0:_.name)||""})]})}},{accessorKey:"teacher",header:"Giáo viên",cell:({row:l})=>{const t=l.getValue("teacher");return e.jsxs("div",{className:"text-left",children:[e.jsx("div",{children:(t==null?void 0:t.fullName)||"Chưa phân công"}),(t==null?void 0:t.department)&&e.jsx("div",{className:"text-sm text-muted-foreground",children:t.department.abbrName})]})}},{accessorKey:"students",header:({column:l})=>e.jsxs(c,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),children:["Số học sinh",e.jsx($,{className:"ml-2 h-4 w-4"})]}),cell:({row:l})=>{const t=l.getValue("students");return e.jsx("div",{className:"text-left px-3 font-medium",children:t})}},{id:"actions",header:()=>e.jsx("div",{className:"text-center",children:"Hành động"}),enableHiding:!1,cell:({row:l})=>{const t=l.original;return e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qe,{children:[e.jsx(We,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Mở menu"}),e.jsx(Ye,{className:"h-4 w-4"})]})}),e.jsxs(Je,{align:"end",children:[e.jsx(Ze,{children:"Hành động"}),e.jsx(P,{onClick:()=>navigator.clipboard.writeText(t.code),children:"Copy mã lớp"}),e.jsx(es,{}),e.jsx(P,{onClick:()=>r(t),className:"cursor-pointer",children:"Sửa"}),e.jsx(P,{onClick:()=>k(t.id,t.name),className:"cursor-pointer text-red-600",children:"Xóa"})]})]})})}}],bs=[{title:"Quản lý lớp học",href:"/classrooms"}];function Us({classrooms:r,teachers:k,courses:l,semesters:t,academicYears:_,filters:p={}}){var ee,se,ae,te;const{props:Ce}=Xe(),f=(ee=Ce.auth)==null?void 0:ee.user;f==null||f.role,f==null||f.role;const[Se,w]=h.useState(!1),[b,K]=h.useState(!1),[U,V]=h.useState(null),[ke,D]=h.useState(!1),[q,z]=h.useState(null),[we,X]=h.useState(""),[De,G]=h.useState(!1),[o,H]=h.useState((p==null?void 0:p.academic_year_id)||"all"),[x,T]=h.useState((p==null?void 0:p.semester_id)||"all"),[g,B]=h.useState((p==null?void 0:p.search)||""),[M,Te]=h.useState(!0);console.log("check semesters:",t);const{data:y,setData:v,post:Ae,put:Ie,delete:Fe,processing:Y,errors:u,reset:O}=le({name:"",course_id:null,semester_id:null,teacher_id:null,students:0,department_id:null}),{data:n,setData:j,post:Ee,processing:R,errors:m,reset:Q}=le({course_id:null,semester_id:null,teacher_id:null,students_per_class:30,number_of_classes:1,class_name_prefix:""}),C=o==="all"?t:t.filter(s=>s.academicYear_id.toString()===o);h.useEffect(()=>{o!=="all"&&x!=="all"&&(C.some(a=>a.id.toString()===x)||T("all"))},[o,C]);const Ke=(s,a)=>{z(s),X(a),D(!0)},Ve=()=>{q!==null&&Fe(route("classrooms.destroy",q),{onSuccess:()=>{i.success("Xóa lớp học thành công"),D(!1),z(null),X("")},onError:s=>{s.reference?i.error(`Không thể xóa lớp học này: ${s.reference}`):s.permission?i.error(s.permission):i.error("Xóa lớp học thất bại"),D(!1)}})},He=s=>{s.preventDefault(),b?U!==null&&Ie(route("classrooms.update",U),{onSuccess:()=>{i.success("Cập nhật lớp học thành công"),O(),w(!1),K(!1),V(null)},onError:a=>{console.log("Update errors:",a),a.permission?i.error(a.permission):a.teacher_id?i.error(a.teacher_id):i.error("Cập nhật lớp học thất bại")}}):Ae(route("classrooms.store"),{onSuccess:()=>{i.success("Thêm lớp học mới thành công"),O(),w(!1)},onError:a=>{console.log("Errors:",a),a.course_id?i.error(a.course_id):a.teacher_id?i.error(a.teacher_id):i.error("Thêm lớp học mới thất bại")}})},Be=s=>{var a;K(!0),v({name:s.name,course_id:s.course.id,semester_id:s.semester.id,teacher_id:((a=s.teacher)==null?void 0:a.id)||null,students:s.students,department_id:s.department_id||null}),V(s.id),w(!0)},Me=s=>{w(s),s||(O(),K(!1),V(null))},Oe=s=>{s.preventDefault(),Ee(route("classrooms.bulk-store"),{onSuccess:()=>{i.success("Tạo lớp học hàng loạt thành công"),Q(),G(!1)},onError:a=>{console.log("Bulk creation errors:",a),a.course_id?i.error(a.course_id):a.teacher_id?i.error(a.teacher_id):a.class_name_prefix?i.error(a.class_name_prefix):i.error("Tạo lớp học hàng loạt thất bại")}})},Pe=s=>{G(s),s||Q()};h.useEffect(()=>{if(n.course_id){const s=l.find(a=>a.id===n.course_id);if(s){const a=s.code||s.name.split(" ").map(ze=>ze[0]).join("").toUpperCase();j("class_name_prefix",a)}}},[n.course_id]);const $e=Array.isArray(r)?r:r.data||[],Le=_s({onEdit:s=>Be(s),onDelete:(s,a)=>Ke(s,a)}),W=()=>{const s=new URLSearchParams;o&&o!=="all"&&s.append("academic_year_id",o),x&&x!=="all"&&s.append("semester_id",x),g.trim()&&s.append("search",g.trim());const a=s.toString()?`${route("classrooms.index")}?${s.toString()}`:route("classrooms.index");re.visit(a,{preserveState:!0,preserveScroll:!0})},J=()=>{H("all"),T("all"),B(""),re.visit(route("classrooms.index"),{preserveState:!0,preserveScroll:!0})},S=o!=="all"||x!=="all"||g,Ue=s=>{s.key==="Enter"&&W()},A=Array.isArray(r)?r.length:r.total||0,Z=Array.isArray(r)?r.filter(s=>s.teacher_id).length:((se=r.data)==null?void 0:se.filter(s=>s.teacher_id).length)||0,qe=A-Z;return e.jsxs(ss,{breadcrumbs:bs,children:[e.jsx(Ge,{title:"Quản lý lớp học"}),e.jsx(ls,{}),e.jsxs("div",{className:"flex-1 space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Quản lý lớp học"}),e.jsx("p",{className:"text-muted-foreground",children:"Tạo và quản lý các lớp học trong hệ thống"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Tổng lớp"})]}),e.jsx(be,{orientation:"vertical",className:"h-12"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Z}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Có GV"})]}),e.jsx(be,{orientation:"vertical",className:"h-12"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:qe}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Chưa có GV"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ne,{open:Se,onOpenChange:Me,children:[e.jsx(ce,{asChild:!0,children:e.jsxs(c,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),"Thêm lớp học"]})}),e.jsxs(ie,{children:[e.jsxs(de,{children:[e.jsx(oe,{children:b?"Chỉnh sửa thông tin lớp học":"Thêm lớp học mới"}),e.jsx(he,{children:"Nhập thông tin ở đây, sau đó nhấn lưu"})]}),e.jsx("form",{onSubmit:He,id:"classroom-form",className:"space-y-6 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"name",children:"Tên lớp học"}),e.jsx(N,{id:"name",value:y.name,onChange:s=>v("name",s.target.value),className:"w-full"}),u.name&&e.jsx("p",{className:"text-sm text-red-500",children:u.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"semester_id",children:"Học kỳ"}),e.jsxs("select",{id:"semester_id",value:y.semester_id||"",onChange:s=>v("semester_id",s.target.value?parseInt(s.target.value):null),className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",disabled:b,children:[e.jsx("option",{value:"",children:"Chọn học kỳ"}),t.map(s=>{var a;return e.jsxs("option",{value:s.id,children:[s.name," - ",(a=s.academicYear)==null?void 0:a.name]},s.id)})]}),u.semester_id&&e.jsx("p",{className:"text-sm text-red-500",children:u.semester_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"course_id",children:"Khóa học"}),e.jsxs("select",{id:"course_id",value:y.course_id||"",onChange:s=>v("course_id",s.target.value?parseInt(s.target.value):null),className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",disabled:b,children:[e.jsx("option",{value:"",children:"Chọn khóa học"}),l.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")",s.department&&` - ${s.department.abbrName}`]},s.id))]}),u.course_id&&e.jsx("p",{className:"text-sm text-red-500",children:u.course_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"teacher_id",children:"Giáo viên phụ trách"}),e.jsxs("select",{id:"teacher_id",value:y.teacher_id||"",onChange:s=>v("teacher_id",s.target.value?parseInt(s.target.value):null),className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Chọn giáo viên"}),k.map(s=>e.jsxs("option",{value:s.id,children:[s.fullName,s.department&&` (${s.department.abbrName})`]},s.id))]}),u.teacher_id&&e.jsx("p",{className:"text-sm text-red-500",children:u.teacher_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"students",children:"Số lượng học sinh"}),e.jsx(N,{id:"students",type:"number",min:"0",max:"200",value:y.students,onChange:s=>v("students",parseInt(s.target.value)||0),className:"w-full"}),u.students&&e.jsx("p",{className:"text-sm text-red-500",children:u.students})]})]})}),e.jsxs(me,{children:[e.jsx(xe,{asChild:!0,children:e.jsx(c,{variant:"outline",type:"button",className:"hover:cursor-pointer",children:"Thoát"})}),e.jsx(c,{type:"submit",form:"classroom-form",disabled:Y,className:"hover:cursor-pointer",children:Y?"Đang xử lý...":b?"Cập nhật":"Thêm mới"})]})]})]}),e.jsxs(ne,{open:De,onOpenChange:Pe,children:[e.jsx(ce,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:"hover:cursor-pointer",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),"Thêm lớp học hàng loạt"]})}),e.jsxs(ie,{className:"w-[600px] sm:w-[700px]",children:[e.jsxs(de,{children:[e.jsx(oe,{children:"Thêm lớp học hàng loạt"}),e.jsx(he,{children:"Tạo nhiều lớp học cùng lúc với thông tin tương tự"})]}),e.jsx("form",{onSubmit:Oe,id:"bulk-classroom-form",className:"space-y-6 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"bulk-course_id",children:"Khóa học *"}),e.jsxs("select",{id:"bulk-course_id",value:n.course_id||"",onChange:s=>j("course_id",s.target.value?parseInt(s.target.value):null),className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Chọn khóa học"}),l.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")",s.department&&` - ${s.department.abbrName}`]},s.id))]}),m.course_id&&e.jsx("p",{className:"text-sm text-red-500",children:m.course_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"bulk-semester_id",children:"Học kỳ *"}),e.jsxs("select",{id:"bulk-semester_id",value:n.semester_id||"",onChange:s=>j("semester_id",s.target.value?parseInt(s.target.value):null),className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Chọn học kỳ"}),t.map(s=>{var a;return e.jsxs("option",{value:s.id,children:[s.name," - (",(a=s.academicYear)==null?void 0:a.name,")"]},s.id)})]}),m.semester_id&&e.jsx("p",{className:"text-sm text-red-500",children:m.semester_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"bulk-teacher_id",children:"Giáo viên phụ trách"}),e.jsxs("select",{id:"bulk-teacher_id",value:n.teacher_id||"",onChange:s=>j("teacher_id",s.target.value?parseInt(s.target.value):null),className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Chưa phân công (có thể chỉ định sau)"}),k.map(s=>e.jsxs("option",{value:s.id,children:[s.fullName,s.department&&` (${s.department.abbrName})`]},s.id))]}),m.teacher_id&&e.jsx("p",{className:"text-sm text-red-500",children:m.teacher_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"bulk-number_of_classes",children:"Số lượng lớp học *"}),e.jsx(N,{id:"bulk-number_of_classes",type:"number",min:"1",max:"20",value:n.number_of_classes,onChange:s=>j("number_of_classes",parseInt(s.target.value)||1),className:"w-full",required:!0}),m.number_of_classes&&e.jsx("p",{className:"text-sm text-red-500",children:m.number_of_classes})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"bulk-students_per_class",children:"Số học sinh mỗi lớp *"}),e.jsx(N,{id:"bulk-students_per_class",type:"number",min:"1",max:"200",value:n.students_per_class,onChange:s=>j("students_per_class",parseInt(s.target.value)||30),className:"w-full",required:!0}),m.students_per_class&&e.jsx("p",{className:"text-sm text-red-500",children:m.students_per_class})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"bulk-class_name_prefix",children:"Tiền tố tên lớp *"}),e.jsx(N,{id:"bulk-class_name_prefix",value:n.class_name_prefix,onChange:s=>j("class_name_prefix",s.target.value),placeholder:"VD: CNTT2024",className:"w-full",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Tên lớp sẽ được tạo theo định dạng: ",n.class_name_prefix," N01, ",n.class_name_prefix," N02, ..."]}),m.class_name_prefix&&e.jsx("p",{className:"text-sm text-red-500",children:m.class_name_prefix})]}),n.class_name_prefix&&n.number_of_classes>0&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Xem trước tên các lớp học sẽ được tạo:"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-md",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Array.from({length:Math.min(n.number_of_classes,10)},(s,a)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:[n.class_name_prefix," N",String(a+1).padStart(2,"0")]},a)),n.number_of_classes>10&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-sm",children:["... và ",n.number_of_classes-10," lớp khác"]})]})})]})]})}),e.jsxs(me,{children:[e.jsx(xe,{asChild:!0,children:e.jsx(c,{variant:"outline",type:"button",className:"hover:cursor-pointer",children:"Hủy"})}),e.jsx(c,{type:"submit",form:"bulk-classroom-form",disabled:R,className:"hover:cursor-pointer",children:R?"Đang tạo...":`Tạo ${n.number_of_classes} lớp học`})]})]})]})]}),e.jsxs(fe,{children:[e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5"}),"Bộ lọc lớp học",S&&e.jsxs(E,{variant:"secondary",className:"ml-2",children:[[o,x,g].filter(s=>s&&s!=="all").length," bộ lọc"]})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>Te(!M),children:M?"Thu gọn":"Mở rộng"})]})}),M&&e.jsxs(_e,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Tìm kiếm"]}),e.jsx(N,{placeholder:"Tên lớp, môn học, giáo viên...",value:g,onChange:s=>B(s.target.value),onKeyPress:Ue,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"Năm học"]}),e.jsxs(ue,{value:o,onValueChange:H,children:[e.jsx(pe,{children:e.jsx(ge,{placeholder:"Chọn năm học"})}),e.jsxs(je,{children:[e.jsx(F,{value:"all",children:"Tất cả năm học"}),_.map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(as,{className:"h-4 w-4"}),"Học kỳ"]}),e.jsxs(ue,{value:x,onValueChange:T,disabled:o==="all"||!C.length,children:[e.jsx(pe,{children:e.jsx(ge,{placeholder:"Chọn học kỳ"})}),e.jsxs(je,{children:[e.jsx(F,{value:"all",children:"Tất cả học kỳ"}),C.map(s=>e.jsxs(F,{value:s.id.toString(),children:[s.name,s.academicYear&&` - ${s.academicYear.name}`]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"text-sm font-medium opacity-0",children:"Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{onClick:W,size:"lg",className:"flex-1",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"Lọc"]}),e.jsx(c,{onClick:J,variant:"outline",size:"lg",disabled:!S,children:e.jsx(I,{className:"h-4 w-4"})})]})]})]}),S&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Đang lọc theo:"}),o&&o!=="all"&&e.jsxs(E,{variant:"secondary",className:"flex items-center gap-1",children:["Năm: ",(ae=_.find(s=>s.id.toString()===o))==null?void 0:ae.name,e.jsx(c,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>H("all"),children:e.jsx(I,{className:"h-3 w-3"})})]}),x&&x!=="all"&&e.jsxs(E,{variant:"secondary",className:"flex items-center gap-1",children:["HK: ",(te=C.find(s=>s.id.toString()===x))==null?void 0:te.name,e.jsx(c,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>T("all"),children:e.jsx(I,{className:"h-3 w-3"})})]}),g&&e.jsxs(E,{variant:"secondary",className:"flex items-center gap-1",children:['"',g,'"',e.jsx(c,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>B(""),children:e.jsx(I,{className:"h-3 w-3"})})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:J,className:"text-xs h-6",children:"Xóa tất cả"})]})]})]}),e.jsxs(fe,{children:[e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ne,{children:["Danh sách lớp học",S&&e.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",r.from,"-",r.to," / ",A," - đã lọc)"]}),!S&&e.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",r.from,"-",r.to," / ",A,")"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:[e.jsx(us,{className:"h-4 w-4 mr-1"}),"Làm mới"]})})]})}),e.jsxs(_e,{children:[e.jsx(Re,{columns:Le,data:$e,searchKey:"name",searchPlaceholder:"Tìm kiếm theo tên lớp học..."}),r.links&&e.jsx("div",{className:"mt-6",children:e.jsx(ts,{links:r.links.map(s=>({...s,url:s.url??null})),from:r.from||0,to:r.to||0,total:r.total||0})})]})]})]}),e.jsx(rs,{open:ke,onOpenChange:D,children:e.jsxs(ns,{children:[e.jsxs(cs,{children:[e.jsx(is,{children:"Xác nhận xóa"}),e.jsxs(ds,{children:['Bạn có chắc chắn muốn xóa lớp học "',we,'"? Hành động này không thể hoàn tác.']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:"Hủy"}),e.jsx(ms,{onClick:Ve,children:"Xóa"})]})]})})]})}export{Us as default};
