import{r as R,j as e,L as A,S}from"./app-BzdOADVP.js";import{A as D,B as C}from"./app-layout-DJJLhKv_.js";import{C as j,a as o,b as p,c as u}from"./card-Cs6Ji-ep.js";import{B as g}from"./badge-D3QJI1i6.js";import{B as T}from"./app-logo-icon-BkO5Ozxv.js";import{L as d}from"./label-Dppx2W-H.js";import{S as N,a as f,b as v,c as _,d as l}from"./select-OCxlDRz8.js";import{T as E,a as Y,b as w,c as i,d as K,e as r}from"./table-0haSWtSt.js";import{P as M}from"./pagination-BB0cugiz.js";import{U as B}from"./users-Mxzx9_FF.js";import{B as P}from"./building-2-elMs-EHZ.js";import{F as k}from"./filter-C1TH0Smz.js";import{R as U}from"./rotate-ccw-zuwDQO56.js";import"./index-CK31Y0Kf.js";import"./index-C1afcH4J.js";import"./chevron-down-CEWiBjPz.js";const q=[{title:"Lớp học của tôi",href:"/teacher/classrooms"}];function ne({teacher:t,classrooms:c,courses:L,academicYears:F,semesters:b,filters:m}){const[a,y]=R.useState({academic_year_id:m.academic_year_id||"all",semester_id:m.semester_id||"all",course_id:m.course_id||"all"}),h=(s,x)=>{const n={...a,[s]:x};s==="academic_year_id"&&(n.semester_id="all"),y(n)},H=()=>{const s=Object.fromEntries(Object.entries(a).map(([x,n])=>[x,n==="all"?"":n]));S.get("/teacher/classrooms",s,{preserveState:!0,preserveScroll:!0})},V=()=>{y({academic_year_id:"all",semester_id:"all",course_id:"all"}),S.get("/teacher/classrooms",{},{preserveState:!0,preserveScroll:!0})},O=a.academic_year_id&&a.academic_year_id!=="all"?b.filter(s=>s.academicYear.id.toString()===a.academic_year_id):b;return e.jsxs(D,{breadcrumbs:q,children:[e.jsx(A,{title:"Lớp học của tôi"}),e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Lớp học của tôi"}),e.jsx("p",{className:"text-muted-foreground",children:"Quản lý và theo dõi các lớp học bạn đang giảng dạy"})]})}),e.jsxs(j,{children:[e.jsx(o,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Thông tin giảng viên"]})}),e.jsx(u,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Họ tên:"}),e.jsx("span",{children:t.fullName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Khoa:"}),e.jsx(g,{variant:"outline",children:t.department.abbrName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Bằng cấp:"}),e.jsx("span",{children:t.degree.name})]})]})})]}),e.jsxs(j,{children:[e.jsx(o,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"Bộ lọc"]})}),e.jsx(u,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Năm học"}),e.jsxs(N,{value:a.academic_year_id,onValueChange:s=>h("academic_year_id",s),children:[e.jsx(f,{children:e.jsx(v,{placeholder:"Chọn năm học"})}),e.jsxs(_,{children:[e.jsx(l,{value:"all",children:"Tất cả năm học"}),F.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Học kỳ"}),e.jsxs(N,{value:a.semester_id,onValueChange:s=>h("semester_id",s),children:[e.jsx(f,{children:e.jsx(v,{placeholder:"Chọn học kỳ"})}),e.jsxs(_,{children:[e.jsx(l,{value:"all",children:"Tất cả học kỳ"}),O.map(s=>e.jsxs(l,{value:s.id.toString(),children:[s.name," (",s.academicYear.name,")"]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Môn học"}),e.jsxs(N,{value:a.course_id,onValueChange:s=>h("course_id",s),children:[e.jsx(f,{children:e.jsx(v,{placeholder:"Chọn môn học"})}),e.jsxs(_,{children:[e.jsx(l,{value:"all",children:"Tất cả môn học"}),L.map(s=>e.jsxs(l,{value:s.id.toString(),children:[s.name," (",s.code,")"]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"invisible",children:"Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:H,className:"flex-1",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Lọc"]}),e.jsx(T,{variant:"outline",onClick:V,children:e.jsx(U,{className:"w-4 h-4"})})]})]})]})})]}),e.jsxs(j,{children:[e.jsx(o,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Danh sách lớp học (",c.total," lớp)"]})}),e.jsx(u,{children:c.data.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(E,{children:[e.jsx(Y,{children:e.jsxs(w,{children:[e.jsx(i,{children:"Tên lớp"}),e.jsx(i,{children:"Môn học"}),e.jsx(i,{children:"Học kỳ"}),e.jsx(i,{children:"Năm học"}),e.jsx(i,{className:"text-center",children:"Số sinh viên"}),e.jsx(i,{children:"Ngày tạo"})]})}),e.jsx(K,{children:c.data.map(s=>e.jsxs(w,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.course.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.course.code})]})}),e.jsx(r,{children:e.jsx(g,{variant:"outline",children:s.semester.name})}),e.jsx(r,{children:s.semester.academicYear.name}),e.jsx(r,{className:"text-center",children:e.jsxs(g,{variant:"secondary",children:[e.jsx(B,{className:"w-3 h-3 mr-1"}),s.students]})}),e.jsx(r,{children:new Date(s.created_at).toLocaleDateString("vi-VN")})]},s.id))})]})}),e.jsx(M,{links:c.links,from:c.from,to:c.to,total:c.total})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Không có lớp học nào"}),e.jsx("p",{className:"text-muted-foreground",children:Object.values(a).some(s=>s&&s!=="all")?"Thử thay đổi bộ lọc để xem thêm kết quả.":"Bạn chưa được phân công dạy lớp học nào."})]})})]})]})]})}export{ne as default};
