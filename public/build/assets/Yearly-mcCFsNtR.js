import{j as e,L as O,$ as P}from"./app-BzdOADVP.js";import{A as V,G as E,m as k,B as G,T as M}from"./app-layout-DJJLhKv_.js";import{C as m,a as h,b as N,c as j,d as I}from"./card-Cs6Ji-ep.js";import{B as b}from"./badge-D3QJI1i6.js";import{c as R,B as v}from"./app-logo-icon-BkO5Ozxv.js";import{T as U,a as q,b as w,c as x,d as z,e as c}from"./table-0haSWtSt.js";import{E as K}from"./eye-fIjAslyx.js";import{D as Q}from"./download-CFjlwEKO.js";import{U as X}from"./users-Mxzx9_FF.js";import{B as J}from"./building-2-elMs-EHZ.js";import{C as W}from"./calculator-BGAZN5Ev.js";import{C as Z}from"./calendar-BR3WW--q.js";import"./index-CK31Y0Kf.js";import"./index-C1afcH4J.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],y=R("ArrowLeft",Y),ee=[{title:"Báo cáo lương",href:"/teacher/reports"},{title:"Báo cáo năm học",href:"#"}];function fe({teacher:n,academicYear:i,salaryData:u,summary:d}){var C,A,T,B;const l=t=>{if(t==null)return 0;const o=Number(t);return isNaN(o)?0:o},g=(t,o=1)=>l(t).toFixed(o),f=t=>{const o=l(t);return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(o)},F=t=>{const o=l(t);return new Intl.NumberFormat("vi-VN").format(o)},p={totalSalary:l(d==null?void 0:d.totalSalary),totalClasses:l(d==null?void 0:d.totalClasses),totalLessons:l(d==null?void 0:d.totalLessons),averageSalaryPerClass:l(d==null?void 0:d.averageSalaryPerClass)};return e.jsxs(V,{breadcrumbs:ee,children:[e.jsx(O,{title:`Báo cáo lương ${(i==null?void 0:i.name)||"N/A"} - ${(n==null?void 0:n.fullName)||"N/A"}`}),e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx(v,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(P,{href:"/teacher/reports",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Quay lại"]})})}),e.jsxs("p",{className:"font-medium text-lg",children:["Báo cáo lương ",(i==null?void 0:i.name)||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{variant:"outline",onClick:()=>{const t=`/teacher/reports/${i==null?void 0:i.id}/pdf`;window.open(t,"_blank")},children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Xem trước PDF"]}),e.jsxs(v,{onClick:()=>{const t=`/teacher/reports/${i==null?void 0:i.id}/pdf`;window.location.href=t},className:"bg-red-600 hover:bg-red-700",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Tải PDF"]})]})]}),e.jsxs(m,{children:[e.jsx(h,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Thông tin giảng viên"]})}),e.jsx(j,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Thông tin cơ bản"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Họ tên:"})," ",(n==null?void 0:n.fullName)||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",(n==null?void 0:n.email)||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Điện thoại:"})," ",(n==null?void 0:n.phone)||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ngày sinh:"})," ",n!=null&&n.DOB?new Date(n.DOB).toLocaleDateString("vi-VN"):"N/A"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Khoa và bằng cấp"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Khoa:"})," ",((C=n==null?void 0:n.department)==null?void 0:C.name)||"N/A"]}),e.jsx(b,{variant:"outline",children:((A=n==null?void 0:n.department)==null?void 0:A.abbrName)||"N/A"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Bằng cấp:"})," ",((T=n==null?void 0:n.degree)==null?void 0:T.name)||"N/A"]}),e.jsxs(b,{variant:"secondary",children:["HS: ",l((B=n==null?void 0:n.degree)==null?void 0:B.baseSalaryFactor)]})]})})]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(m,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium text-green-700",children:"Tổng lương"}),e.jsx(k,{className:"h-4 w-4 text-green-600"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-green-900",children:f(p.totalSalary)})})]}),e.jsxs(m,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium text-blue-700",children:"Tổng lớp học"}),e.jsx(G,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:F(p.totalClasses)})})]}),e.jsxs(m,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium text-purple-700",children:"Tổng tiết quy đổi"}),e.jsx(W,{className:"h-4 w-4 text-purple-600"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:g(p.totalLessons)})})]}),e.jsxs(m,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium text-orange-700",children:"TB lương/lớp"}),e.jsx(M,{className:"h-4 w-4 text-orange-600"})]}),e.jsx(j,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:f(p.averageSalaryPerClass)})})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(u||{}).map(([t,o])=>{const a=(o||[]).reduce((s,r)=>s+l(r==null?void 0:r.total_salary),0),$=(o||[]).length,L=(o||[]).reduce((s,r)=>s+l(r==null?void 0:r.converted_lessons),0);return e.jsxs(m,{children:[e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(N,{className:"text-xl flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),t||"N/A"]}),e.jsxs(I,{children:[$," lớp học • ",g(L)," tiết quy đổi • ",f(a)]})]})})}),e.jsx(j,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs(w,{children:[e.jsx(x,{children:"Lớp học"}),e.jsx(x,{children:"Môn học"}),e.jsx(x,{className:"text-center",children:"Số tiết"}),e.jsx(x,{className:"text-center",children:"HS Lớp"}),e.jsx(x,{className:"text-center",children:"HS Môn"}),e.jsx(x,{className:"text-center",children:"HS GV"}),e.jsx(x,{className:"text-center",children:"Tiết QĐ"}),e.jsx(x,{className:"text-right",children:"Lương"})]})}),e.jsxs(z,{children:[Array.isArray(o)&&o.map(s=>{var r,_,S,D,H;return e.jsxs(w,{children:[e.jsx(c,{className:"font-medium",children:((r=s==null?void 0:s.classroom)==null?void 0:r.name)||"N/A"}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((S=(_=s==null?void 0:s.classroom)==null?void 0:_.course)==null?void 0:S.name)||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:((H=(D=s==null?void 0:s.classroom)==null?void 0:D.course)==null?void 0:H.code)||"N/A"})]})}),e.jsx(c,{className:"text-center",children:l(s==null?void 0:s.actual_lessons)}),e.jsx(c,{className:"text-center",children:e.jsxs(b,{variant:l(s==null?void 0:s.class_coefficient)>=0?"default":"destructive",children:[l(s==null?void 0:s.class_coefficient)>=0?"+":"",l(s==null?void 0:s.class_coefficient)]})}),e.jsxs(c,{className:"text-center",children:["+",l(s==null?void 0:s.course_coefficient)]}),e.jsxs(c,{className:"text-center",children:["+",l(s==null?void 0:s.teacher_coefficient)]}),e.jsx(c,{className:"text-center font-medium",children:g(s==null?void 0:s.converted_lessons)}),e.jsx(c,{className:"text-right font-bold text-green-600",children:f(s==null?void 0:s.total_salary)})]},(s==null?void 0:s.id)||Math.random())}),e.jsxs(w,{className:"bg-muted/50",children:[e.jsxs(c,{colSpan:6,className:"font-bold",children:["Tổng ",t||"N/A"]}),e.jsx(c,{className:"text-center font-bold",children:g(L)}),e.jsx(c,{className:"text-right font-bold text-green-600",children:f(a)})]})]})]})})})]},t)})}),(!u||Object.keys(u).length===0)&&e.jsx(m,{children:e.jsx(j,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Chưa có dữ liệu lương"}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["Giảng viên này chưa có lớp học nào được tính lương trong năm học ",(i==null?void 0:i.name)||"N/A","."]})]})})})]})]})}export{fe as default};
